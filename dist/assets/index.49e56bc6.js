!function(){const s=document.createElement("link").relList;if(!(s&&s.supports&&s.supports("modulepreload"))){for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver((s=>{for(const i of s)if("childList"===i.type)for(const s of i.addedNodes)"LINK"===s.tagName&&"modulepreload"===s.rel&&t(s)})).observe(document,{childList:!0,subtree:!0})}function t(s){if(s.ep)return;s.ep=!0;const t=function(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerpolicy&&(t.referrerPolicy=s.referrerpolicy),"use-credentials"===s.crossorigin?t.credentials="include":"anonymous"===s.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(s);fetch(s.href,t)}}();class s extends class{constructor(s,t,i,e){this.x=s,this.y=t,this.height=e,this.width=i}intersects(s){let t=this.width,i=this.height,e=s.width,h=s.height;if(e<=0||h<=0||t<=0||i<=0)return!1;let a=this.x,n=this.y,r=s.x,d=s.y;return e+=r,h+=d,t+=a,i+=n,(e<r||e>a)&&(h<d||h>n)&&(t<a||t>r)&&(i<n||i>d)}}{constructor(s,t,i,e,h,a,n){super(s,t,i,e),this.dx=h,this.dy=a,this.img=n}draw(s){s.drawImage(this.img,this.x,this.y,this.width,this.height)}move(){this.x+=this.dx,this.y+=this.dy}}class t extends s{constructor(s,t,i,e,h,a,n){const r=new Image(i,e);r.src="./assets/tank.png",super(s,t,i,e,h,a,r),this.displacement=n,this.enabled=!0,document.addEventListener("keydown",this.keyDownHandler.bind(this)),document.addEventListener("keyup",this.keyUpHandler.bind(this))}keyDownHandler(s){"Right"===s.key||"ArrowRight"===s.key&&this.enabled?this.dx=this.displacement:("Left"===s.key||"ArrowLeft"===s.key&&this.enabled)&&(this.dx=-this.displacement)}keyUpHandler(s){("Right"===s.key||"ArrowRight"===s.key&&this.enabled||"Left"===s.key||"ArrowLeft"===s.key&&this.enabled)&&(this.dx=0)}move(s){this.x+this.dx-50>-50&&this.x+this.dx+50<s&&(this.x+=this.dx)}}class i extends s{constructor(s,t,i,e,h,a){const n=new Image(i,e);n.src="./assets/missile.png",super(s,t,i,e,h,a,n)}playSound(){new Audio("./assets/shot.mp3").play()}}class e extends s{constructor(s,t,i,e,h,a){const n=new Image(i,e);n.src="./assets/invader.png",super(s,t,i,e,h,a,n)}move(){this.y+=this.dy,this.x+=2*(Math.random()-.5)}playSound(){new Audio("./assets/explosion.mp3").play()}}class h{constructor(s,t,i,e,h,a){this.x=s,this.y=t,this.color=i,this.missiles=e,this.invaders=h,this.gameOver=a}draw(s){s.font="16px Arial",s.fillText("Invaders shot down: "+this.invaders,this.x,this.y),this.gameOver?s.fillText("Game Over!",this.x,this.y+20):s.fillText("Missiles remaining: "+this.missiles,this.x,this.y+20),s.fillStyle=this.color}}const a=document.getElementById("myCanvas"),n=a.getContext("2d");let r=new class{constructor(s,i){this.canvas=s,this.ctx=i,this.ship=new t(s.width/2-25,s.height-60,50,50,0,0,5),this.display=new h(10,20,"White",0,0,!1),this.missiles=[],this.invaders=[],this.score=0,this.gameStart=!1,this.gameOver=!1,this.music=new Audio("./assets/music.mp3"),document.addEventListener("keyup",this.keyUpHandler.bind(this))}updateShip(){this.ship.draw(this.ctx),this.ship.move(this.canvas.width)}updateMissiles(){for(let s=0;s<this.missiles.length;s++){let t=this.missiles[s];t.y<-1*this.canvas.height+400?(this.missiles[s]=null,this.missiles.shift()):(t.draw(this.ctx),t.move())}}handleGameStart(){this.gameStart=!0,this.music.play()}handleGameOver(){this.gameOver=!0,this.missiles=[],this.invaders=[],this.ship.x=this.canvas.width/2-25,this.ship.y=this.canvas.height-60,this.ship.dx=0,this.music.pause(),this.ship.enabled=!1}updateInvaders(){if(!this.gameOver&&this.invaders.length<5&&100*Math.random()<1){let s=new e(Math.random()*(this.canvas.width-100)+25,-1*this.canvas.height+500,50,50,0,3*Math.random()+1);this.invaders.push(s)}for(let s=0;s<this.invaders.length;s++){let t=this.invaders[s];if(t){if(t.y>this.canvas.height-20){this.handleGameOver();break}t.draw(this.ctx),t.move()}}}updateDisplay(){this.display.draw(this.ctx),this.display.missiles=10-this.missiles.length,this.display.invaders=this.score,this.display.gameOver=this.gameOver}checkIntersections(){for(let s=0;s<this.missiles.length;s++){let t=this.missiles[s];for(let i=0;i<this.invaders.length;i++){let e=this.invaders[i];if(t.intersects(e)){e.playSound(),this.invaders.splice(i,1),this.missiles.splice(s,1),this.score+=1;break}}}}keyUpHandler(s){if("Space"===s.code&&this.gameStart&&!this.gameOver){if(this.missiles.length<10){let s=new i(this.ship.x+20,this.ship.y-12,10,20,0,-2,3);s.playSound(),this.missiles.push(s)}}else this.gameStart||"ArrowRight"!==s.code&&"Right"!==s.code&&"ArrowLeft"!==s.code&&"Left"!==s.code||this.handleGameStart()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.updateShip(),this.gameStart&&(this.updateMissiles(),this.updateInvaders()),this.checkIntersections(),this.updateDisplay()}}(a,n);!function s(){r.draw(),window.requestAnimationFrame(s)}();
